# 大屏接口集成文档

本文档描述了农产品交易平台大屏的接口集成现状及后续集成计划。

## 1. 接口集成概览

| 接口名称 | 接口路径 | 集成状态 | 备注 |
| :--- | :--- | :--- | :--- |
| **批发市场数据接口** | `/getTradeMarket` | **❌ 未集成** | 用于获取市场名称等基础信息，目前大屏未显示相关数据。 |
| **可视化指标数据接口** | `/visualData` | **⚠️ 部分集成** | 已集成排行榜数据，**核心指标卡片数据（如交易总额等）尚未集成**。 |
| **地图交易数据接口** | `/tradeDataProvinces` | **✅ 已集成** | 用于地图省份交易量及热力图分布。 |
| **疑似异常交易监测接口** | `/abnormal` | **✅ 已集成** | 用于异常交易滚动列表。 |
| **市场交易活跃度接口** | `/activity` | **✅ 已集成** | 用于堆叠折线图。 |

---

## 2. UI组件集成详情

### 2.1 核心指标卡片 (Pending)

以下组件目前显示为静态数据或空数据，需要连接 `/visualData` 接口。

| UI组件名称 (Label) | 组件ID (Value) | 对应接口字段 | 当前状态 | 计划操作 |
| :--- | :--- | :--- | :--- | :--- |
| **交易总量** | `cpm8672efb1-ee30-4e48-acf8-23f0f26a7c29` | `businessSum` | ❌ 未连接 | 绑定字段，显示单位：吨/公斤 |
| **交易金额** | `cpme55a84fd-cf3a-483b-adf8-301d6a611f22` | `totalSum` | ❌ 未连接 | 绑定字段，显示单位：万元 |
| **交易均价** | `cpm14289986-335c-4e4f-a0c9-37f4cf6a82c0` | `average` | ❌ 未连接 | 绑定字段，显示单位：元/公斤 |
| **交易均价(不含异常)** | `cpm8cbbc08a-cc47-42e5-b0c7-1c22b090f14a` | `averageNoCheck` | ❌ 未连接 | 绑定字段，显示单位：元/公斤 |
| **屠宰场数量** | `cpm18e89d42-8641-40e8-8884-db5ce5da24dc` | `abattoirNum` | ❌ 未连接 | 绑定字段，显示单位：家 |
| **采购商数量** | `cpm9ce068f3-90b3-4556-a306-58c47635d1a2` | `purchaserNum` | ❌ 未连接 | 绑定字段，显示单位：家 |

### 2.2 图表与列表 (Integrated)

| UI组件名称 | 数据集名称 (DataSetName) | 对应接口 | 状态 |
| :--- | :--- | :--- | :--- |
| **产地销售量排名** | `产地销售量排名` | `/visualData` (provinceTradeVolumeRank) | ✅ 已集成 |
| **销地采购量排名** | `销地采购量排名` | `/visualData` (countyTradeVolumeRank) | ✅ 已集成 |
| **商品销售排行** | `商品销售排行` | `/visualData` (tradeFactoryPrices) | ✅ 已集成 |
| **堆叠折线图** | `堆叠折线图` | `/activity` | ✅ 已集成 |
| **异常交易数据** | `异常交易数据` | `/abnormal` | ✅ 已集成 |
| **省份交易量地图** | `省份交易量` / `项目分布` | `/tradeDataProvinces` | ✅ 已集成 |

---

## 3. 集成计划

### 步骤 1: 补充核心指标数据映射
在 `custom.data.js` 中完善 `visualData` 的处理逻辑，将接口返回的数值字段映射到上述核心指标卡片的组件 ID 上。

### 步骤 2: 集成批发市场信息
在 `custom.data.js` 中新增 `/getTradeMarket` 接口调用，获取市场名称并更新到大屏（如需显示）。

### 步骤 3: 验证与调试
刷新大屏页面，验证各数值组件是否正确显示接口返回的实时数据。
